{"version":3,"file":"/packages/stripe-meteor.js","sources":["stripe-meteor/stripe_client.js","stripe-meteor/stripe_checkout.js"],"names":[],"mappings":";;;;;;;;AAAA,0vU;;;;;;;;;;;;;;;;;;ACAA,a;;AAEA,2B;;AAEA,oC;AACA,a;AACA,mE;AACA,I;;AAEA,oC;AACA,a;AACA,mE;AACA,I;;AAEA,uC;AACA,a;AACA,sE;AACA,I;;AAEA,qC;;AAEA,c;AACA,yE;AACA,2D;;AAEA,S;AACA,Y;AACA,c;AACA,C;;AAEA,c;AACA,iB;;AAEA,mB;AACA,uD;AACA,oC;AACA,K;;AAEA,sD;;AAEA,gD;;AAEA,2C;AACA,mD;AACA,qD;AACA,qD;AACA,qD;AACA,qD;AACA,mD;AACA,uB;AACA,U;;AAEA,sC;AACA,sC;AACA,uD;AACA,sC;AACA,c;AACA,K;;AAEA,wH;AACA,+I;AACA,Y;AACA,e;AACA,uD;AACA,wB;AACA,wB;AACA,wB;AACA,wB;AACA,wB;AACA,wB;AACA,wB;AACA,U;AACA,Y;;;AAGA,4B;;AAEA,4E;AACA,uE;AACA,2E;AACA,a;;AAEA,gC;AACA,sF;AACA,4B;AACA,wC;AACA,mB;AACA,4E;AACA,sC;AACA,K;;;AAGA,+B;;AAEA,qC;;AAEA,4C;AACA,0C;AACA,4C;AACA,mB;AACA,uB;AACA,oB;AACA,gC;;AAEA,2E;;AAEA,iD;AACA,qD;AACA,sC;AACA,S;;AAEA,wE;AACA,8B;;AAEA,wC;AACA,iD;AACA,S;;AAEA,iD;;AAEA,+B;AACA,sB;AACA,gC;;AAEA,sB;;AAEA,kE;;AAEA,4D;;AAEA,uB;AACA,oB;;AAEA,mE;AACA,oE;AACA,kD;;AAEA,iC;;AAEA,6E;AACA,Q;;AAEA,sB;;AAEA,yE;AACA,8B;;AAEA,yB;AACA,8B;AACA,a;;AAEA,+E;;AAEA,0B;AACA,yB;;AAEA,yB;;AAEA,8E;;AAEA,4E;AACA,uB;;AAEA,sC;AACA,iD;AACA,yD;AACA,iB;;AAEA,6E;AACA,Y;;AAEA,wC;AACA,0B;AACA,yB;AACA,iF;AACA,oD;AACA,2B;AACA,yB;AACA,a;;AAEA,+E;;AAEA,iD;AACA,oC;AACA,iD;AACA,qD;AACA,mC;AACA,0C;AACA,gC;AACA,4E;AACA,yB;AACA,qB;AACA,iB;AACA,oB;;AAEA,4D;;AAEA,kC;AACA,yE;AACA,0C;AACA,gC;AACA,4E;AACA,yB;AACA,qB;AACA,iB;AACA,a;;AAEA,gE;AACA,2B;;AAEA,oC;AACA,sB;AACA,qB;AACA,6E;AACA,gD;AACA,uB;AACA,qB;AACA,S;AACA,K;;AAEA,wE;;AAEA,+C;AACA,4D;;AAEA,+E;AACA,2E;AACA,6E;AACA,4E;AACA,6C;;AAEA,kB;AACA,qB;AACA,wB;;AAEA,4E;AACA,e;;AAEA,4C;AACA,gD;AACA,kC;AACA,iB;;AAEA,4E;;AAEA,mD;AACA,+B;AACA,a;;AAEA,6D;AACA,6B;;AAEA,2B;AACA,6D;AACA,oD;AACA,2D;AACA,kD;AACA,a;;AAEA,oE;AACA,+C;;AAEA,wC;AACA,U;AACA,K;;;AAGA,oE;;AAEA,2C;AACA,+C;;AAEA,8E;AACA,uD;;AAEA,kB;;AAEA,wC;;AAEA,yE;AACA,kC;;AAEA,8C;AACA,yD;AACA,sC;AACA,6E;AACA,+C;AACA,kD;AACA,6C;AACA,oC;AACA,gD;AACA,6B;AACA,yB;AACA,qB;AACA,iB;AACA,wD;AACA,a;;;AAGA,yE;AACA,+E;AACA,gF;;AAEA,gC;AACA,6B;AACA,gC;AACA,sD;AACA,kC;AACA,0E;AACA,mB;AACA,a;;AAEA,6E;AACA,yE;AACA,4E;AACA,+D;;AAEA,6E;AACA,yE;AACA,+E;AACA,4E;AACA,8E;AACA,6E;AACA,2E;;AAEA,+B;AACA,kF;AACA,yG;AACA,gE;;AAEA,yE;AACA,6E;AACA,6E;AACA,wC;;AAEA,2C;;AAEA,+E;AACA,0E;;AAEA,oD;AACA,uC;AACA,wB;AACA,a;;AAEA,mE;;AAEA,gD;AACA,U;AACA,K;AACA,K;AACA,a;AACA,qE;;AAEA,gB;;AAEA,kB;;AAEA,kB;;AAEA,iB;;AAEA,oE;AACA,+B;AACA,+B;AACA,K;AACA,4D;AACA,2E;AACA,I;;AAEA,8C;AACA,wB;AACA,kB;AACA,K;AACA,wC;AACA,8C;AACA,e;AACA,kC;AACA,+C;AACA,kC;AACA,wB;AACA,yB;AACA,oC;AACA,W;AACA,O;AACA,c;AACA,I;;AAEA,4B;AACA,6B;AACA,kC;AACA,I;;AAEA,c;AACA,a;AACA,oK;AACA,0J;AACA,uB;;AAEA,qB;AACA,0C;AACA,I;;AAEA,sB;AACA,0C;AACA,gE;AACA,kD;AACA,iE;AACA,kD;AACA,Y;AACA,oD;AACA,gD;AACA,oB;AACA,yD;AACA,sB;AACA,qC;AACA,4B;AACA,S;AACA,O;AACA,sB;AACA,K;AACA,I;;AAEA,yC;AACA,wB;AACA,+C;AACA,Y;AACA,wC;AACA,K;AACA,I;;AAEA,qC;AACA,a;AACA,qD;AACA,wC;AACA,Y;AACA,4C;AACA,4D;AACA,K;AACA,I;;AAEA,4C;AACA,mC;AACA,6D;AACA,Y;AACA,wD;AACA,K;AACA,I;;AAEA,8C;AACA,sC;AACA,gE;AACA,Y;AACA,wD;AACA,K;AACA,I;;AAEA,mD;AACA,uB;AACA,gB;AACA,K;AACA,yB;AACA,oB;AACA,K;AACA,wB;AACA,iD;AACA,K;AACA,I;;AAEA,sC;AACA,2C;AACA,I;;AAEA,sC;AACA,mE;AACA,I;;AAEA,gC;AACA,8C;AACA,I;;AAEA,2C;AACA,2D;AACA,I;;AAEA,0C;AACA,uE;AACA,I;;AAEA,qC;AACA,sC;AACA,I;;AAEA,8B;AACA,a;AACA,oF;AACA,I;;AAEA,4B;AACA,kB;AACA,mB;AACA,kG;AACA,2B;AACA,K;AACA,qB;AACA,I;;AAEA,wB;AACA,uB;AACA,2C;AACA,iE;AACA,+B;AACA,qD;AACA,I;;AAEA,2B;AACA,e;AACA,yC;AACA,sB;AACA,4B;AACA,I;;AAEA,4B;AACA,4H;AACA,I;;AAEA,mC;AACA,iC;AACA,gC;AACA,Y;AACA,kC;AACA,K;AACA,iB;AACA,I;;AAEA,uB;AACA,mC;AACA,0F;AACA,gB;AACA,uB;AACA,oB;AACA,wC;AACA,sB;AACA,O;AACA,K;AACA,kB;AACA,I;;AAEA,0B;AACA,S;AACA,W;AACA,e;AACA,qB;AACA,e;AACA,mB;AACA,qB;AACA,uB;AACA,uB;AACA,a;AACA,+B;AACA,6B;AACA,mB;AACA,mB;AACA,qB;AACA,e;AACA,qB;AACA,mB;AACA,e;AACA,kB;AACA,I;;AAEA,c;AACA,a;AACA,W;AACA,uB;AACA,0J;;AAEA,mC;;AAEA,wB;AACA,+C;AACA,2B;AACA,4C;AACA,M;AACA,yB;AACA,0C;AACA,M;AACA,a;AACA,wB;AACA,2C;AACA,kH;AACA,wB;AACA,wD;AACA,gD;AACA,wC;AACA,O;AACA,gC;AACA,uB;AACA,mB;AACA,c;AACA,S;AACA,wD;AACA,M;AACA,8B;AACA,e;AACA,qE;AACA,oF;AACA,M;AACA,0B;AACA,oC;AACA,oD;AACA,e;AACA,O;AACA,uD;AACA,e;AACA,O;AACA,gC;AACA,yE;AACA,8D;AACA,O;AACA,uI;AACA,4C;AACA,uE;AACA,O;AACA,M;AACA,yB;AACA,4C;AACA,gD;AACA,qD;AACA,qC;AACA,+B;AACA,sB;AACA,gB;AACA,0C;AACA,S;AACA,c;AACA,gC;AACA,6C;AACA,sB;AACA,gE;AACA,6B;AACA,8B;AACA,S;AACA,wB;AACA,O;AACA,M;AACA,yC;AACA,gB;AACA,4B;AACA,e;AACA,O;AACA,+D;AACA,0B;AACA,O;AACA,gC;AACA,kB;AACA,M;AACA,4B;AACA,mB;AACA,kB;AACA,K;AACA,I;;AAEA,c;AACA,a;AACA,4D;AACA,uF;;AAEA,gL;;AAEA,oC;;AAEA,kC;AACA,+D;AACA,M;;AAEA,kC;AACA,+C;AACA,iC;AACA,0B;AACA,M;;AAEA,kC;AACA,gD;AACA,M;;AAEA,8B;AACA,gB;AACA,qC;AACA,0C;AACA,qB;AACA,mB;AACA,iB;AACA,wB;AACA,kB;AACA,kB;AACA,uB;AACA,sB;AACA,oB;AACA,M;;AAEA,2B;AACA,gB;AACA,4B;AACA,qB;AACA,O;AACA,4C;;AAEA,0C;;AAEA,+B;AACA,oD;AACA,kE;AACA,yD;AACA,gE;AACA,c;AACA,iE;AACA,O;AACA,6D;AACA,uB;AACA,O;AACA,K;;AAEA,4C;AACA,gB;AACA,4B;AACA,qB;AACA,O;AACA,+B;AACA,oF;AACA,M;;AAEA,sC;AACA,+B;AACA,M;;AAEA,kD;AACA,iD;AACA,4B;AACA,qB;AACA,O;AACA,0C;AACA,4B;AACA,0B;AACA,2B;AACA,6C;AACA,+B;AACA,S;AACA,O;AACA,4B;AACA,6B;AACA,kC;AACA,O;AACA,+B;AACA,yD;AACA,O;AACA,0D;AACA,mC;AACA,O;AACA,sC;AACA,uD;AACA,M;;AAEA,e;;AAEA,gB;;AAEA,c;AACA,a;AACA,a;AACA,uF;;AAEA,uC;;AAEA,6C;;AAEA,qC;AACA,wC;AACA,M;;AAEA,gC;AACA,oD;AACA,kD;;AAEA,K;;AAEA,0C;AACA,gC;AACA,qB;AACA,0D;AACA,4E;AACA,wC;AACA,gH;AACA,mE;AACA,gE;AACA,kD;AACA,S;AACA,M;;AAEA,2C;AACA,gC;AACA,M;;AAEA,mD;AACA,gB;AACA,+D;AACA,2B;AACA,O;AACA,mB;AACA,kB;AACA,M;;AAEA,oB;;AAEA,O;;AAEA,c;AACA,a;AACA,oE;AACA,uF;AACA,uB;;AAEA,sM;;AAEA,2C;;AAEA,uC;AACA,+B;AACA,oB;AACA,2B;AACA,4B;AACA,mD;AACA,O;AACA,sB;AACA,M;;AAEA,uC;;AAEA,mC;AACA,6D;AACA,M;;AAEA,qC;AACA,a;AACA,sC;AACA,qD;AACA,M;;AAEA,wC;AACA,uD;AACA,M;;AAEA,8B;AACA,uB;AACA,oD;AACA,kD;;AAEA,0C;AACA,iB;AACA,uE;AACA,gD;AACA,S;AACA,K;;AAEA,wC;AACA,gB;AACA,qB;AACA,+B;AACA,6B;AACA,oB;AACA,+E;AACA,+D;AACA,S;AACA,sE;AACA,wB;AACA,2D;AACA,c;AACA,6F;AACA,O;AACA,M;;AAEA,yC;AACA,4B;AACA,M;;AAEA,6C;AACA,wB;AACA,M;;AAEA,2C;AACA,+B;AACA,M;;AAEA,6E;;AAEA,iD;AACA,gB;AACA,+D;AACA,2B;AACA,O;AACA,mB;AACA,kB;AACA,M;;AAEA,kB;;AAEA,gB;;AAEA,c;AACA,a;AACA,oE;AACA,uF;AACA,uB;;AAEA,sM;;AAEA,4C;;AAEA,wC;AACA,+B;AACA,oB;AACA,2B;AACA,4B;AACA,mD;AACA,O;AACA,sB;AACA,M;;AAEA,wC;;AAEA,sO;;AAEA,+H;;AAEA,+B;AACA,uB;AACA,oD;AACA,8D;;AAEA,wD;;AAEA,8C;;AAEA,kD;;AAEA,4D;;AAEA,gD;;AAEA,oD;;AAEA,4C;;AAEA,0C;;AAEA,8C;;AAEA,0C;AACA,iB;AACA,uE;AACA,gD;AACA,S;AACA,K;;AAEA,2C;AACA,uB;AACA,2B;AACA,O;AACA,sC;AACA,0C;AACA,gC;AACA,8B;AACA,iD;AACA,O;AACA,M;;AAEA,yC;AACA,gB;AACA,qB;AACA,6B;AACA,oB;AACA,+E;AACA,gE;AACA,S;AACA,yC;AACA,6B;AACA,iD;AACA,S;AACA,iC;AACA,2F;AACA,M;;AAEA,0C;AACA,uB;AACA,oC;AACA,2C;AACA,S;AACA,M;;AAEA,8C;AACA,gB;AACA,yE;AACA,M;;AAEA,4C;AACA,+B;AACA,M;;AAEA,+F;;AAEA,kD;AACA,oB;AACA,kB;AACA,M;;AAEA,kD;AACA,gB;AACA,+D;AACA,2B;AACA,O;AACA,mB;AACA,kB;AACA,M;;AAEA,2C;AACA,gB;AACA,wC;AACA,gC;AACA,2F;AACA,M;;AAEA,gD;AACA,iB;AACA,qB;AACA,gD;AACA,8C;AACA,uD;AACA,4C;AACA,uC;AACA,mD;AACA,S;AACA,yD;AACA,oB;AACA,M;;AAEA,0D;AACA,uD;AACA,sD;AACA,oB;AACA,6D;AACA,+B;AACA,sB;AACA,wD;AACA,mC;AACA,kE;AACA,gB;AACA,mC;AACA,uD;AACA,8D;AACA,S;AACA,O;AACA,sB;AACA,M;;AAEA,mB;;AAEA,O;;AAEA,c;AACA,a;AACA,wG;AACA,uF;;AAEA,gR;;AAEA,2B;;AAEA,uC;;AAEA,iC;AACA,6B;AACA,wC;AACA,0C;AACA,8B;AACA,M;;AAEA,8B;AACA,gB;AACA,4B;AACA,qB;AACA,O;AACA,sD;;AAEA,sD;;AAEA,sD;;AAEA,4C;;AAEA,0C;;AAEA,8C;;AAEA,8C;;AAEA,8C;;AAEA,+B;AACA,iE;AACA,kD;AACA,8C;AACA,8C;AACA,2C;AACA,kD;AACA,oB;AACA,K;;AAEA,0C;AACA,8B;AACA,kD;AACA,2C;AACA,kC;AACA,6C;AACA,2C;AACA,4C;AACA,O;AACA,mD;AACA,mD;AACA,oD;AACA,iF;AACA,0C;AACA,M;;AAEA,0C;AACA,e;AACA,qB;AACA,gC;AACA,mD;AACA,O;AACA,kC;AACA,iC;AACA,mB;AACA,oC;AACA,S;AACA,O;AACA,2C;AACA,kD;AACA,gD;AACA,O;AACA,kC;AACA,sC;AACA,wD;AACA,iB;AACA,O;AACA,M;;AAEA,2C;AACA,8C;AACA,M;;AAEA,0C;AACA,kD;AACA,M;;AAEA,8C;AACA,2C;AACA,M;;AAEA,2C;AACA,mD;AACA,2B;AACA,O;AACA,+B;AACA,oB;AACA,O;AACA,mB;AACA,M;;AAEA,+C;AACA,4B;AACA,qB;AACA,O;AACA,+B;AACA,oC;AACA,M;;AAEA,8C;AACA,iB;AACA,gC;AACA,qD;AACA,O;AACA,uB;AACA,4C;AACA,mC;AACA,4B;AACA,O;AACA,4B;AACA,M;;AAEA,oD;AACA,gB;AACA,8C;AACA,4B;AACA,0C;AACA,0B;AACA,mB;AACA,M;;AAEA,8C;AACA,wC;AACA,mC;AACA,6D;AACA,0B;AACA,uF;AACA,oB;AACA,S;AACA,O;AACA,kB;AACA,M;;AAEA,8C;AACA,uB;AACA,yM;AACA,M;;AAEA,qD;AACA,0D;AACA,4B;AACA,qB;AACA,O;AACA,0C;AACA,2B;AACA,6D;AACA,qC;AACA,sC;AACA,oC;AACA,S;AACA,O;AACA,4B;AACA,6B;AACA,kC;AACA,O;AACA,4B;AACA,0B;AACA,2B;AACA,4D;AACA,6B;AACA,S;AACA,O;AACA,gD;AACA,kC;AACA,2C;AACA,O;AACA,M;;AAEA,oD;AACA,c;AACA,kC;AACA,2B;AACA,wC;AACA,oC;AACA,kD;AACA,sC;AACA,sC;AACA,iD;AACA,4C;AACA,6C;AACA,6C;AACA,6C;AACA,mC;AACA,mC;AACA,Q;AACA,M;;AAEA,8C;AACA,wC;AACA,M;;AAEA,kB;;AAEA,O;;AAEA,c;AACA,a;AACA,yC;;AAEA,kH;;AAEA,mC;AACA,iC;AACA,K;;AAEA,e;AACA,4B;AACA,kC;AACA,2B;AACA,6B;AACA,oB;AACA,4D;AACA,yB;AACA,sC;AACA,4B;AACA,S;AACA,O;AACA,sB;AACA,S;AACA,0C;AACA,mB;AACA,a;AACA,K;AACA,gC;AACA,wC;AACA,qB;AACA,O;AACA,oB;AACA,oB;AACA,uD;AACA,O;;AAEA,c","sourcesContent":["(function(){var e,t,n,r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},u=this;this.Stripe=function(){function e(){}return e.version=2,e.endpoint=\"https://api.stripe.com/v1\",e.setPublishableKey=function(t){e.key=t},e.complete=function(t){return function(n,r,i){var s;if(n!==\"success\")return s=Math.round((new Date).getTime()/1e3),(new Image).src=\"http://q.stripe.com?event=stripejs-error&type=\"+n+\"&key=\"+e.key+\"&timestamp=\"+s,typeof t==\"function\"?t(500,{error:{code:n,type:n,message:\"An unexpected error has occurred with Stripe.js. This may\\nbe due to network connectivity issues, so you should try\\nagain (you won't be charged twice). If you're still having\\nproblems, please let us know!\"}}):void 0}},e}.call(this),e=this.Stripe,this.Stripe.token=function(){function t(){}return t.validate=function(e,t){if(!e)throw t+\" required\";if(typeof e!=\"object\")throw t+\" invalid\"},t.formatData=function(t,n){return e.utils.isElement(t)&&(t=e.utils.paramsFromForm(t,n)),e.utils.underscoreKeys(t),t},t.create=function(t,n){return t.key||(t.key=e.key||e.publishableKey),e.utils.validateKey(t.key),e.ajaxJSONP({url:\"\"+e.endpoint+\"/tokens\",data:t,method:\"POST\",success:function(e,t){return typeof n==\"function\"?n(t,e):void 0},complete:e.complete(n),timeout:4e4})},t.get=function(t,n){if(!t)throw\"token required\";return e.utils.validateKey(e.key),e.ajaxJSONP({url:\"\"+e.endpoint+\"/tokens/\"+t,data:{key:e.key},success:function(e,t){return typeof n==\"function\"?n(t,e):void 0},complete:e.complete(n),timeout:4e4})},t}.call(this),this.Stripe.card=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return o(n,t),n.tokenName=\"card\",n.whitelistedAttrs=[\"number\",\"cvc\",\"exp_month\",\"exp_year\",\"name\",\"address_line1\",\"address_line2\",\"address_city\",\"address_state\",\"address_zip\",\"address_country\"],n.createToken=function(t,r,i){var s;return r==null&&(r={}),e.token.validate(t,\"card\"),typeof r==\"function\"?(i=r,r={}):typeof r!=\"object\"&&(s=parseInt(r,10),r={},s>0&&(r.amount=s)),r[n.tokenName]=e.token.formatData(t,n.whitelistedAttrs),e.token.create(r,i)},n.getToken=function(t,n){return e.token.get(t,n)},n.validateCardNumber=function(e){return e=(e+\"\").replace(/\\s+|-/g,\"\"),e.length>=10&&e.length<=16&&n.luhnCheck(e)},n.validateCVC=function(t){return t=e.utils.trim(t),/^\\d+$/.test(t)&&t.length>=3&&t.length<=4},n.validateExpiry=function(t,n){var r,i;return t=e.utils.trim(t),n=e.utils.trim(n),/^\\d+$/.test(t)?/^\\d+$/.test(n)?parseInt(t,10)<=12?(i=new Date(n,t),r=new Date,i.setMonth(i.getMonth()-1),i.setMonth(i.getMonth()+1,1),i>r):!1:!1:!1},n.luhnCheck=function(e){var t,n,r,i,s,o;r=!0,i=0,n=(e+\"\").split(\"\").reverse();for(s=0,o=n.length;s<o;s++){t=n[s],t=parseInt(t,10);if(r=!r)t*=2;t>9&&(t-=9),i+=t}return i%10===0},n.cardType=function(e){return n.cardTypes[e.slice(0,2)]||\"Unknown\"},n.cardTypes=function(){var e,t,n,r;t={};for(e=n=40;n<=49;e=++n)t[e]=\"Visa\";for(e=r=50;r<=59;e=++r)t[e]=\"MasterCard\";return t[34]=t[37]=\"American Express\",t[60]=t[62]=t[64]=t[65]=\"Discover\",t[35]=\"JCB\",t[30]=t[36]=t[38]=t[39]=\"Diners Club\",t}(),n}.call(this,this.Stripe.token),this.Stripe.bankAccount=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return o(n,t),n.tokenName=\"bank_account\",n.whitelistedAttrs=[\"country\",\"routing_number\",\"account_number\"],n.createToken=function(t,r,i){return r==null&&(r={}),e.token.validate(t,\"bank account\"),typeof r==\"function\"&&(i=r,r={}),r[n.tokenName]=e.token.formatData(t,n.whitelistedAttrs),e.token.create(r,i)},n.getToken=function(t,n){return e.token.get(t,n)},n.validateRoutingNumber=function(t,r){t=e.utils.trim(t);switch(r){case\"US\":return/^\\d+$/.test(t)&&t.length===9&&n.routingChecksum(t);case\"CA\":return/\\d{5}\\-\\d{3}/.test(t)&&t.length===9;default:return!0}},n.validateAccountNumber=function(t,n){t=e.utils.trim(t);switch(n){case\"US\":return/^\\d+$/.test(t)&&t.length>=1&&t.length<=17;default:return!0}},n.routingChecksum=function(e){var t,n,r,i,s,o;r=0,t=(e+\"\").split(\"\"),o=[0,3,6];for(i=0,s=o.length;i<s;i++)n=o[i],r+=parseInt(t[n])*3,r+=parseInt(t[n+1])*7,r+=parseInt(t[n+2]);return r!==0&&r%10===0},n}.call(this,this.Stripe.token),t=[\"createToken\",\"getToken\",\"cardType\",\"validateExpiry\",\"validateCVC\",\"validateCardNumber\"];for(r=0,i=t.length;r<i;r++)n=t[r],this.Stripe[n]=this.Stripe.card[n];typeof module!=\"undefined\"&&module!==null&&(module.exports=this.Stripe),typeof define==\"function\"&&define(\"stripe\",[],function(){return u.Stripe})}).call(this),function(){var e,t,n,r=[].slice;e=encodeURIComponent,t=(new Date).getTime(),n=function(t,r,i){var s,o;r==null&&(r=[]);for(s in t)o=t[s],i&&(s=\"\"+i+\"[\"+s+\"]\"),typeof o==\"object\"?n(o,r,s):r.push(\"\"+s+\"=\"+e(o));return r.join(\"&\").replace(/%20/g,\"+\")},this.Stripe.ajaxJSONP=function(e){var i,s,o,u,a,f;return e==null&&(e={}),o=\"sjsonp\"+ ++t,a=document.createElement(\"script\"),s=null,i=function(t){var n;return t==null&&(t=\"abort\"),clearTimeout(s),(n=a.parentNode)!=null&&n.removeChild(a),o in window&&(window[o]=function(){}),typeof e.complete==\"function\"?e.complete(t,f,e):void 0},f={abort:i},a.onerror=function(){return f.abort(),typeof e.error==\"function\"?e.error(f,e):void 0},window[o]=function(){var t;t=1<=arguments.length?r.call(arguments,0):[],clearTimeout(s),a.parentNode.removeChild(a);try{delete window[o]}catch(n){window[o]=void 0}return typeof e.success==\"function\"&&e.success.apply(e,t),typeof e.complete==\"function\"?e.complete(\"success\",f,e):void 0},e.data||(e.data={}),e.data.callback=o,e.method&&(e.data._method=e.method),a.src=e.url+\"?\"+n(e.data),u=document.getElementsByTagName(\"head\")[0],u.appendChild(a),e.timeout>0&&(s=setTimeout(function(){return f.abort(\"timeout\")},e.timeout)),f}}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};this.Stripe.utils=function(){function t(){}return t.trim=function(e){return(e+\"\").replace(/^\\s+|\\s+$/g,\"\")},t.underscore=function(e){return(e+\"\").replace(/([A-Z])/g,function(e){return\"_\"+e.toLowerCase()}).replace(/-/g,\"_\")},t.underscoreKeys=function(e){var t,n,r;r=[];for(t in e)n=e[t],delete e[t],r.push(e[this.underscore(t)]=n);return r},t.isElement=function(e){return typeof e!=\"object\"?!1:typeof jQuery!=\"undefined\"&&jQuery!==null&&e instanceof jQuery?!0:e.nodeType===1},t.paramsFromForm=function(t,n){var r,i,s,o,u,a,f,l,c,h;n==null&&(n=[]),typeof jQuery!=\"undefined\"&&jQuery!==null&&t instanceof jQuery&&(t=t[0]),s=t.getElementsByTagName(\"input\"),u=t.getElementsByTagName(\"select\"),a={};for(f=0,c=s.length;f<c;f++){i=s[f],r=this.underscore(i.getAttribute(\"data-stripe\"));if(e.call(n,r)<0)continue;a[r]=i.value}for(l=0,h=u.length;l<h;l++){o=u[l],r=this.underscore(o.getAttribute(\"data-stripe\"));if(e.call(n,r)<0)continue;o.selectedIndex!=null&&(a[r]=o.options[o.selectedIndex].value)}return a},t.validateKey=function(e){if(!e||typeof e!=\"string\")throw new Error(\"You did not set a valid publishable key. Call Stripe.setPublishableKey() with your publishable key. For more info, see https://stripe.com/docs/stripe.js\");if(/\\s/g.test(e))throw new Error(\"Your key is invalid, as it contains whitespace. For more info, see https://stripe.com/docs/stripe.js\");if(/^sk_/.test(e))throw new Error(\"You are using a secret key with Stripe.js, instead of the publishable one. For more info, see https://stripe.com/docs/stripe.js\")},t}()}.call(this),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};this.Stripe.validator={\"boolean\":function(e,t){if(t!==\"true\"&&t!==\"false\")return\"Enter a boolean string (true or false)\"},integer:function(e,t){if(!/^\\d+$/.test(t))return\"Enter an integer\"},positive:function(e,t){if(!(!this.integer(e,t)&&parseInt(t,10)>0))return\"Enter a positive value\"},range:function(t,n){var r;if(r=parseInt(n,10),e.call(t,r)<0)return\"Needs to be between \"+t[0]+\" and \"+t[t.length-1]},required:function(e,t){if(e&&(t==null||t===\"\"))return\"Required\"},year:function(e,t){if(!/^\\d{4}$/.test(t))return\"Enter a 4-digit year\"},birthYear:function(e,t){var n;n=this.year(e,t);if(n)return n;if(parseInt(t,10)>2e3)return\"You must be over 18\";if(parseInt(t,10)<1900)return\"Enter your birth year\"},month:function(e,t){if(this.integer(e,t))return\"Please enter a month\";if(this.range([1,2,3,4,5,6,7,8,9,10,11,12],t))return\"Needs to be between 1 and 12\"},choices:function(t,n){if(e.call(t,n)<0)return\"Not an acceptable value for this field\"},email:function(e,t){if(!/^[^@<\\s>]+@[^@<\\s>]+$/.test(t))return\"That doesn't look like an email address\"},url:function(e,t){if(!/^https?:\\/\\/.+\\..+/.test(t))return\"Not a valid url\"},usTaxID:function(e,t){if(!/^\\d{2}-?\\d{1}-?\\d{2}-?\\d{4}$/.test(t))return\"Not a valid tax ID\"},ein:function(e,t){if(!/^\\d{2}-?\\d{7}$/.test(t))return\"Not a valid EIN\"},ssnLast4:function(e,t){if(!/^\\d{4}$/.test(t))return\"Not a valid last 4 digits for an SSN\"},ownerPersonalID:function(e,t){var n;n=function(){switch(e){case\"CA\":return/^\\d{3}-?\\d{3}-?\\d{3}$/.test(t);case\"US\":return!0}}();if(!n)return\"Not a valid ID\"},bizTaxID:function(e,t){var n,r,i,s,o,u,a,f;u={CA:[\"Tax ID\",[/^\\d{9}$/]],US:[\"EIN\",[/^\\d{2}-?\\d{7}$/]]},o=u[e];if(o!=null){n=o[0],s=o[1],r=!1;for(a=0,f=s.length;a<f;a++){i=s[a];if(i.test(t)){r=!0;break}}if(!r)return\"Not a valid \"+n}},zip:function(e,t){var n;n=function(){switch(e.toUpperCase()){case\"CA\":return/^[\\d\\w]{6}$/.test(t!=null?t.replace(/\\s+/g,\"\"):void 0);case\"US\":return/^\\d{5}$/.test(t)||/^\\d{9}$/.test(t)}}();if(!n)return\"Not a valid zip\"},bankAccountNumber:function(e,t){if(!/^\\d{1,17}$/.test(t))return\"Invalid bank account number\"},usRoutingNumber:function(e){var t,n,r,i,s,o,u;if(!/^\\d{9}$/.test(e))return\"Routing number must have 9 digits\";s=0;for(t=o=0,u=e.length-1;o<=u;t=o+=3)n=parseInt(e.charAt(t),10)*3,r=parseInt(e.charAt(t+1),10)*7,i=parseInt(e.charAt(t+2),10),s+=n+r+i;if(s===0||s%10!==0)return\"Invalid routing number\"},caRoutingNumber:function(e){if(!/^\\d{5}\\-\\d{3}$/.test(e))return\"Invalid transit number\"},routingNumber:function(e,t){switch(e.toUpperCase()){case\"CA\":return this.caRoutingNumber(t);case\"US\":return this.usRoutingNumber(t)}},phoneNumber:function(e,t){var n;n=t.replace(/[^0-9]/g,\"\");if(n.length!==10)return\"Invalid phone number\"},bizDBA:function(e,t){if(!/^.{1,23}$/.test(t))return\"Statement descriptors can only have up to 23 characters\"},nameLength:function(e,t){if(t.length===1)return\"Names need to be longer than one character\"}}}.call(this);","(function() {\n\n  this.StripeCheckout = {};\n\n  StripeCheckout.load = function() {\n    var _ref;\n    return (_ref = StripeCheckout.App).load.apply(_ref, arguments);\n  };\n\n  StripeCheckout.open = function() {\n    var _ref;\n    return (_ref = StripeCheckout.App).open.apply(_ref, arguments);\n  };\n\n  StripeCheckout.setHost = function() {\n    var _ref;\n    return (_ref = StripeCheckout.App).setHost.apply(_ref, arguments);\n  };\n\n  this.StripeButton = StripeCheckout;\n\n}).call(this);\n// Create a JSON object only if one does not already exist. We create the\n// methods in a closure to avoid creating global variables.\n\nvar JSON;\nif (!JSON) {\n    JSON = {};\n}\n\n(function () {\n    'use strict';\n\n    function f(n) {\n        // Format integers to have at least two digits.\n        return n < 10 ? '0' + n : n;\n    }\n\n    if (typeof Date.prototype.toJSON !== 'function') {\n\n        Date.prototype.toJSON = function (key) {\n\n            return isFinite(this.valueOf())\n                ? this.getUTCFullYear()     + '-' +\n                    f(this.getUTCMonth() + 1) + '-' +\n                    f(this.getUTCDate())      + 'T' +\n                    f(this.getUTCHours())     + ':' +\n                    f(this.getUTCMinutes())   + ':' +\n                    f(this.getUTCSeconds())   + 'Z'\n                : null;\n        };\n\n        String.prototype.toJSON      =\n            Number.prototype.toJSON  =\n            Boolean.prototype.toJSON = function (key) {\n                return this.valueOf();\n            };\n    }\n\n    var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\n        gap,\n        indent,\n        meta = {    // table of character substitutions\n            '\\b': '\\\\b',\n            '\\t': '\\\\t',\n            '\\n': '\\\\n',\n            '\\f': '\\\\f',\n            '\\r': '\\\\r',\n            '\"' : '\\\\\"',\n            '\\\\': '\\\\\\\\'\n        },\n        rep;\n\n\n    function quote(string) {\n\n// If the string contains no control characters, no quote characters, and no\n// backslash characters, then we can safely slap some quotes around it.\n// Otherwise we must also replace the offending characters with safe escape\n// sequences.\n\n        escapable.lastIndex = 0;\n        return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\n            var c = meta[a];\n            return typeof c === 'string'\n                ? c\n                : '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n        }) + '\"' : '\"' + string + '\"';\n    }\n\n\n    function str(key, holder) {\n\n// Produce a string from holder[key].\n\n        var i,          // The loop counter.\n            k,          // The member key.\n            v,          // The member value.\n            length,\n            mind = gap,\n            partial,\n            value = holder[key];\n\n// If the value has a toJSON method, call it to obtain a replacement value.\n\n        if (value && typeof value === 'object' &&\n                typeof value.toJSON === 'function') {\n            value = value.toJSON(key);\n        }\n\n// If we were called with a replacer function, then call the replacer to\n// obtain a replacement value.\n\n        if (typeof rep === 'function') {\n            value = rep.call(holder, key, value);\n        }\n\n// What happens next depends on the value's type.\n\n        switch (typeof value) {\n        case 'string':\n            return quote(value);\n\n        case 'number':\n\n// JSON numbers must be finite. Encode non-finite numbers as null.\n\n            return isFinite(value) ? String(value) : 'null';\n\n        case 'boolean':\n        case 'null':\n\n// If the value is a boolean or null, convert it to a string. Note:\n// typeof null does not produce 'null'. The case is included here in\n// the remote chance that this gets fixed someday.\n\n            return String(value);\n\n// If the type is 'object', we might be dealing with an object or an array or\n// null.\n\n        case 'object':\n\n// Due to a specification blunder in ECMAScript, typeof null is 'object',\n// so watch out for that case.\n\n            if (!value) {\n                return 'null';\n            }\n\n// Make an array to hold the partial results of stringifying this object value.\n\n            gap += indent;\n            partial = [];\n\n// Is the value an array?\n\n            if (Object.prototype.toString.apply(value) === '[object Array]') {\n\n// The value is an array. Stringify every element. Use null as a placeholder\n// for non-JSON values.\n\n                length = value.length;\n                for (i = 0; i < length; i += 1) {\n                    partial[i] = str(i, value) || 'null';\n                }\n\n// Join all of the elements together, separated with commas, and wrap them in\n// brackets.\n\n                v = partial.length === 0\n                    ? '[]'\n                    : gap\n                    ? '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']'\n                    : '[' + partial.join(',') + ']';\n                gap = mind;\n                return v;\n            }\n\n// If the replacer is an array, use it to select the members to be stringified.\n\n            if (rep && typeof rep === 'object') {\n                length = rep.length;\n                for (i = 0; i < length; i += 1) {\n                    if (typeof rep[i] === 'string') {\n                        k = rep[i];\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            } else {\n\n// Otherwise, iterate through all of the keys in the object.\n\n                for (k in value) {\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\n                        v = str(k, value);\n                        if (v) {\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\n                        }\n                    }\n                }\n            }\n\n// Join all of the member texts together, separated with commas,\n// and wrap them in braces.\n\n            v = partial.length === 0\n                ? '{}'\n                : gap\n                ? '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}'\n                : '{' + partial.join(',') + '}';\n            gap = mind;\n            return v;\n        }\n    }\n\n// If the JSON object does not yet have a stringify method, give it one.\n\n    if (typeof JSON.stringify !== 'function') {\n        JSON.stringify = function (value, replacer, space) {\n\n// The stringify method takes a value and an optional replacer, and an optional\n// space parameter, and returns a JSON text. The replacer can be a function\n// that can replace values, or an array of strings that will select the keys.\n// A default replacer method can be provided. Use of the space parameter can\n// produce text that is more easily readable.\n\n            var i;\n            gap = '';\n            indent = '';\n\n// If the space parameter is a number, make an indent string containing that\n// many spaces.\n\n            if (typeof space === 'number') {\n                for (i = 0; i < space; i += 1) {\n                    indent += ' ';\n                }\n\n// If the space parameter is a string, it will be used as the indent string.\n\n            } else if (typeof space === 'string') {\n                indent = space;\n            }\n\n// If there is a replacer, it must be a function or an array.\n// Otherwise, throw an error.\n\n            rep = replacer;\n            if (replacer && typeof replacer !== 'function' &&\n                    (typeof replacer !== 'object' ||\n                    typeof replacer.length !== 'number')) {\n                throw new Error('JSON.stringify');\n            }\n\n// Make a fake root object containing our value under the key of ''.\n// Return the result of stringifying the value.\n\n            return str('', {'': value});\n        };\n    }\n\n\n// If the JSON object does not yet have a parse method, give it one.\n\n    if (typeof JSON.parse !== 'function') {\n        JSON.parse = function (text, reviver) {\n\n// The parse method takes a text and an optional reviver function, and returns\n// a JavaScript value if the text is a valid JSON text.\n\n            var j;\n\n            function walk(holder, key) {\n\n// The walk method is used to recursively walk the resulting structure so\n// that modifications can be made.\n\n                var k, v, value = holder[key];\n                if (value && typeof value === 'object') {\n                    for (k in value) {\n                        if (Object.prototype.hasOwnProperty.call(value, k)) {\n                            v = walk(value, k);\n                            if (v !== undefined) {\n                                value[k] = v;\n                            } else {\n                                delete value[k];\n                            }\n                        }\n                    }\n                }\n                return reviver.call(holder, key, value);\n            }\n\n\n// Parsing happens in four stages. In the first stage, we replace certain\n// Unicode characters with escape sequences. JavaScript handles many characters\n// incorrectly, either silently deleting them, or treating them as line endings.\n\n            text = String(text);\n            cx.lastIndex = 0;\n            if (cx.test(text)) {\n                text = text.replace(cx, function (a) {\n                    return '\\\\u' +\n                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n                });\n            }\n\n// In the second stage, we run the text against regular expressions that look\n// for non-JSON patterns. We are especially concerned with '()' and 'new'\n// because they can cause invocation, and '=' because it can cause mutation.\n// But just to be safe, we want to reject all unexpected forms.\n\n// We split the second stage into 4 regexp operations in order to work around\n// crippling inefficiencies in IE's and Safari's regexp engines. First we\n// replace the JSON backslash pairs with '@' (a non-JSON character). Second, we\n// replace all simple value tokens with ']' characters. Third, we delete all\n// open brackets that follow a colon or comma or that begin the text. Finally,\n// we look to see that the remaining characters are only whitespace or ']' or\n// ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.\n\n            if (/^[\\],:{}\\s]*$/\n                    .test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')\n                        .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']')\n                        .replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))) {\n\n// In the third stage we use the eval function to compile the text into a\n// JavaScript structure. The '{' operator is subject to a syntactic ambiguity\n// in JavaScript: it can begin a block or an object literal. We wrap the text\n// in parens to eliminate the ambiguity.\n\n                j = eval('(' + text + ')');\n\n// In the optional fourth stage, we recursively walk the new structure, passing\n// each name/value pair to a reviver function for possible transformation.\n\n                return typeof reviver === 'function'\n                    ? walk({'': j}, '')\n                    : j;\n            }\n\n// If the text is not JSON parseable, then a SyntaxError is thrown.\n\n            throw new SyntaxError('JSON.parse');\n        };\n    }\n}());\n(function() {\n  var cacheBust, interval, lastHash, postMessage, re, receiveMessage;\n\n  cacheBust = 1;\n\n  interval = null;\n\n  lastHash = null;\n\n  re = /^#?\\d+&/;\n\n  postMessage = function(target, targetURL, message, targetOrigin) {\n    if (targetOrigin == null) {\n      targetOrigin = targetURL;\n    }\n    message = (+(new Date)) + (cacheBust++) + '&' + message;\n    return target.location = targetURL.replace(/#.*$/, '') + '#' + message;\n  };\n\n  receiveMessage = function(callback, delay) {\n    if (delay == null) {\n      delay = 100;\n    }\n    interval && clearInterval(interval);\n    return interval = setInterval(function() {\n      var hash;\n      hash = window.location.hash;\n      if (hash !== lastHash && re.test(hash)) {\n        window.location.hash = '';\n        lastHash = hash;\n        return callback({\n          data: hash.replace(re, '')\n        });\n      }\n    }, delay);\n  };\n\n  StripeCheckout.message = {\n    postMessage: postMessage,\n    receiveMessage: receiveMessage\n  };\n\n}).call(this);\n(function() {\n  var $, $$, addClass, append, attr, bind, css, escape, except, hasAttr, hasClass, host, insertAfter, insertBefore, parents, remove, resolve, text, trigger, unbind,\n    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; },\n    __slice = [].slice;\n\n  $ = function(sel) {\n    return document.querySelectorAll(sel);\n  };\n\n  $$ = function(cls) {\n    var el, reg, _i, _len, _ref, _results;\n    if (typeof document.getElementsByClassName === 'function') {\n      return document.getElementsByClassName(cls);\n    } else if (typeof document.querySelectorAll === 'function') {\n      return document.querySelectorAll(\".\" + cls);\n    } else {\n      reg = new RegExp(\"(^|\\\\s)\" + cls + \"(\\\\s|$)\");\n      _ref = document.getElementsByTagName('*');\n      _results = [];\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        el = _ref[_i];\n        if (reg.test(el.className)) {\n          _results.push(el);\n        }\n      }\n      return _results;\n    }\n  };\n\n  attr = function(element, attr, value) {\n    if (value != null) {\n      return element.setAttribute(attr, value);\n    } else {\n      return element.getAttribute(attr);\n    }\n  };\n\n  hasAttr = function(element, attr) {\n    var node;\n    if (typeof element.hasAttribute === 'function') {\n      return element.hasAttribute(attr);\n    } else {\n      node = element.getAttributeNode(attr);\n      return !!(node && (node.specified || node.nodeValue));\n    }\n  };\n\n  bind = function(element, name, callback) {\n    if (element.addEventListener) {\n      return element.addEventListener(name, callback, false);\n    } else {\n      return element.attachEvent(\"on\" + name, callback);\n    }\n  };\n\n  unbind = function(element, name, callback) {\n    if (element.removeEventListener) {\n      return element.removeEventListener(name, callback, false);\n    } else {\n      return element.detachEvent(\"on\" + name, callback);\n    }\n  };\n\n  trigger = function(element, name, data, bubble) {\n    if (data == null) {\n      data = {};\n    }\n    if (bubble == null) {\n      bubble = true;\n    }\n    if (window.jQuery) {\n      return jQuery(element).trigger(name, data);\n    }\n  };\n\n  addClass = function(element, name) {\n    return element.className += ' ' + name;\n  };\n\n  hasClass = function(element, name) {\n    return __indexOf.call(element.className.split(' '), name) >= 0;\n  };\n\n  css = function(element, css) {\n    return element.style.cssText += ';' + css;\n  };\n\n  insertBefore = function(element, child) {\n    return element.parentNode.insertBefore(child, element);\n  };\n\n  insertAfter = function(element, child) {\n    return element.parentNode.insertBefore(child, element.nextSibling);\n  };\n\n  append = function(element, child) {\n    return element.appendChild(child);\n  };\n\n  remove = function(element) {\n    var _ref;\n    return (_ref = element.parentNode) != null ? _ref.removeChild(element) : void 0;\n  };\n\n  parents = function(node) {\n    var ancestors;\n    ancestors = [];\n    while ((node = node.parentNode) && node !== document && __indexOf.call(ancestors, node) < 0) {\n      ancestors.push(node);\n    }\n    return ancestors;\n  };\n\n  host = function(url) {\n    var parent, parser;\n    parent = document.createElement('div');\n    parent.innerHTML = \"<a href=\\\"\" + (escape(url)) + \"\\\">x</a>\";\n    parser = parent.firstChild;\n    return \"\" + parser.protocol + \"//\" + parser.host;\n  };\n\n  resolve = function(url) {\n    var parser;\n    parser = document.createElement('a');\n    parser.href = url;\n    return \"\" + parser.href;\n  };\n\n  escape = function(value) {\n    return value && ('' + value).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n  };\n\n  text = function(element, value) {\n    if ('innerText' in element) {\n      element.innerText = value;\n    } else {\n      element.textContent = value;\n    }\n    return value;\n  };\n\n  except = function() {\n    var k, keys, object, result, v;\n    object = arguments[0], keys = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n    result = {};\n    for (k in object) {\n      v = object[k];\n      if (__indexOf.call(keys, k) < 0) {\n        result[k] = v;\n      }\n    }\n    return result;\n  };\n\n  StripeCheckout.Utils = {\n    $: $,\n    $$: $$,\n    attr: attr,\n    hasAttr: hasAttr,\n    bind: bind,\n    unbind: unbind,\n    trigger: trigger,\n    addClass: addClass,\n    hasClass: hasClass,\n    css: css,\n    insertBefore: insertBefore,\n    insertAfter: insertAfter,\n    append: append,\n    remove: remove,\n    parents: parents,\n    host: host,\n    resolve: resolve,\n    escape: escape,\n    text: text,\n    except: except\n  };\n\n}).call(this);\n(function() {\n  var host,\n    __slice = [].slice,\n    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\n  host = StripeCheckout.Utils.host;\n\n  StripeCheckout.RPC = {\n    whitelist: ['frameReady', 'frameCallback'],\n    getTarget: function() {\n      throw new Error('override getTarget');\n    },\n    getHost: function() {\n      throw new Error('override getHost');\n    },\n    rpcID: 0,\n    invoke: function() {\n      var args, frame, id, message, method;\n      frame = arguments[0], method = arguments[1], args = 3 <= arguments.length ? __slice.call(arguments, 2) : [];\n      id = ++this.rpcID;\n      if (typeof args[args.length - 1] === 'function') {\n        this.callbacks || (this.callbacks = {});\n        this.callbacks[id] = args.pop();\n      }\n      message = JSON.stringify({\n        method: method,\n        args: args,\n        id: id\n      });\n      return frame.postMessage(message, this.getHost());\n    },\n    invokeTarget: function() {\n      var args;\n      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      return this.invoke.apply(this, [this.getTarget()].concat(__slice.call(args)));\n    },\n    message: function(e) {\n      var data, result, _name, _ref;\n      if (host(e.origin) !== host(this.getHost())) {\n        return;\n      }\n      if (!e.source || e.source !== this.getTarget()) {\n        return;\n      }\n      data = JSON.parse(e.data);\n      if (_ref = data.method, __indexOf.call(this.whitelist, _ref) < 0) {\n        throw new Error(\"Method not allowed: \" + data.method);\n      }\n      result = typeof this[_name = data.method] === \"function\" ? this[_name].apply(this, __slice.call(data.args).concat([e])) : void 0;\n      if (data.method !== 'frameCallback') {\n        return this.invoke(e.source, 'frameCallback', data.id, result);\n      }\n    },\n    ready: function(fn) {\n      var callbacks, cb, _i, _len, _results;\n      this.readyQueue || (this.readyQueue = []);\n      this.readyStatus || (this.readyStatus = false);\n      if (typeof fn === 'function') {\n        if (this.readyStatus) {\n          return fn();\n        } else {\n          return this.readyQueue.push(fn);\n        }\n      } else {\n        this.readyStatus = true;\n        callbacks = this.readyQueue.slice(0);\n        _results = [];\n        for (_i = 0, _len = callbacks.length; _i < _len; _i++) {\n          cb = callbacks[_i];\n          _results.push(cb());\n        }\n        return _results;\n      }\n    },\n    frameCallback: function(id, result) {\n      var _base;\n      if (!this.callbacks) {\n        return;\n      }\n      if (typeof (_base = this.callbacks)[id] === \"function\") {\n        _base[id](result);\n      }\n      delete this.callbacks[id];\n      return true;\n    },\n    frameReady: function() {\n      this.ready();\n      return true;\n    }\n  };\n\n}).call(this);\n(function() {\n  var $, $$, append, bind, css, host, remove, resolve, _ref,\n    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  _ref = StripeCheckout.Utils, $ = _ref.$, $$ = _ref.$$, bind = _ref.bind, css = _ref.css, append = _ref.append, remove = _ref.remove, host = _ref.host, resolve = _ref.resolve;\n\n  StripeCheckout.App = (function() {\n\n    App.load = function(options) {\n      return App.instance || (App.instance = new App(options));\n    };\n\n    App.open = function(options) {\n      App.instance || (App.instance = new App);\n      App.instance.open(options);\n      return App.instance;\n    };\n\n    App.setHost = function(host) {\n      return App.prototype.defaults.host = host;\n    };\n\n    App.prototype.defaults = {\n      path: '/',\n      fallbackPath: '/fallback.html',\n      host: 'https://checkout.stripe.com',\n      address: false,\n      amount: null,\n      name: null,\n      description: null,\n      image: null,\n      label: null,\n      panelLabel: null,\n      currency: 'usd',\n      notrack: false\n    };\n\n    function App(options) {\n      var _base;\n      if (options == null) {\n        options = {};\n      }\n      this.close = __bind(this.close, this);\n\n      this.open = __bind(this.open, this);\n\n      this.setOptions(options);\n      if (StripeCheckout.App.Fallback.isEnabled()) {\n        this.view = new StripeCheckout.App.Fallback(this.options);\n      } else if (StripeCheckout.App.Mobile.isEnabled()) {\n        this.view = new StripeCheckout.App.Mobile(this.options);\n      } else {\n        this.view = new StripeCheckout.App.Overlay(this.options);\n      }\n      if (typeof (_base = this.view).render === \"function\") {\n        _base.render();\n      }\n    }\n\n    App.prototype.open = function(options) {\n      var _base;\n      if (options == null) {\n        options = {};\n      }\n      this.setOptions(options);\n      return typeof (_base = this.view).open === \"function\" ? _base.open() : void 0;\n    };\n\n    App.prototype.close = function() {\n      return this.view.close();\n    };\n\n    App.prototype.setOptions = function(options) {\n      var key, value, _base, _ref1, _ref2, _ref3;\n      if (options == null) {\n        options = {};\n      }\n      this.options || (this.options = {});\n      _ref1 = this.defaults;\n      for (key in _ref1) {\n        value = _ref1[key];\n        if ((_ref2 = options[key]) == null) {\n          options[key] = value;\n        }\n      }\n      for (key in options) {\n        value = options[key];\n        this.options[key] = value;\n      }\n      if (this.options.image) {\n        this.options.image = resolve(this.options.image);\n      }\n      if ((_ref3 = (_base = this.options).body) == null) {\n        _base.body = document.body;\n      }\n      this.options.url = document.URL;\n      return this.options.referrer = document.referrer;\n    };\n\n    return App;\n\n  }).call(this);\n\n}).call(this);\n(function() {\n  var except,\n    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  except = StripeCheckout.Utils.except;\n\n  StripeCheckout.App.Fallback = (function() {\n\n    Fallback.isEnabled = function() {\n      return !('postMessage' in window);\n    };\n\n    function Fallback(options) {\n      this.options = options != null ? options : {};\n      this.setToken = __bind(this.setToken, this);\n\n    }\n\n    Fallback.prototype.open = function() {\n      var message, options, url,\n        _this = this;\n      url = this.options.host + this.options.fallbackPath;\n      options = except(this.options, 'body', 'script', 'document', 'token');\n      message = JSON.stringify(options);\n      this.frame = window.open(url, '_blank', 'width=400,height=400,location=yes,resizable=yes,scrollbars=yes');\n      StripeCheckout.message.postMessage(this.frame, url, message);\n      return StripeCheckout.message.receiveMessage(function(e) {\n        return _this.setToken(JSON.parse(e.data));\n      });\n    };\n\n    Fallback.prototype.close = function() {\n      return this.frame.close();\n    };\n\n    Fallback.prototype.setToken = function(token) {\n      var _base;\n      if (typeof (_base = this.options).token === \"function\") {\n        _base.token(token);\n      }\n      this.close();\n      return true;\n    };\n\n    return Fallback;\n\n  })();\n\n}).call(this);\n(function() {\n  var $, $$, append, bind, css, except, host, remove, resolve, _ref,\n    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    __slice = [].slice;\n\n  _ref = StripeCheckout.Utils, $ = _ref.$, $$ = _ref.$$, bind = _ref.bind, css = _ref.css, append = _ref.append, remove = _ref.remove, host = _ref.host, resolve = _ref.resolve, except = _ref.except;\n\n  StripeCheckout.App.Mobile = (function() {\n\n    Mobile.include = function(module) {\n      var key, value, _results;\n      _results = [];\n      for (key in module) {\n        value = module[key];\n        _results.push(this.prototype[key] = value);\n      }\n      return _results;\n    };\n\n    Mobile.include(StripeCheckout.RPC);\n\n    Mobile.isEnabled = function() {\n      return Mobile.isDebugEnabled() || Mobile.isMobileEnv();\n    };\n\n    Mobile.isMobileEnv = function() {\n      var ua;\n      ua = window.navigator.userAgent;\n      return /(Android|iPhone|iPad|CriOS)/i.test(ua);\n    };\n\n    Mobile.isDebugEnabled = function() {\n      return window.location.hash === '#_stripeMobile';\n    };\n\n    function Mobile(options) {\n      var _this = this;\n      this.options = options != null ? options : {};\n      this.setToken = __bind(this.setToken, this);\n\n      bind(window, 'message', function() {\n        var args;\n        args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        return _this.message.apply(_this, args);\n      });\n    }\n\n    Mobile.prototype.open = function() {\n      var _base,\n        _this = this;\n      this.readyStatus = false;\n      this.ready(function() {\n        var options;\n        options = except(_this.options, 'body', 'script', 'document', 'token');\n        return _this.invokeTarget('render', 'mobile', options);\n      });\n      this.frame = window.open(this.options.host + this.options.path);\n      if (!this.frame) {\n        return alert('Please disable your popup blocker.');\n      } else {\n        return typeof (_base = this.options).opened === \"function\" ? _base.opened() : void 0;\n      }\n    };\n\n    Mobile.prototype.close = function() {\n      return window.focus();\n    };\n\n    Mobile.prototype.getTarget = function() {\n      return this.frame;\n    };\n\n    Mobile.prototype.getHost = function() {\n      return this.options.host;\n    };\n\n    Mobile.prototype.whitelist = ['frameReady', 'frameCallback', 'setToken'];\n\n    Mobile.prototype.setToken = function(token) {\n      var _base;\n      if (typeof (_base = this.options).token === \"function\") {\n        _base.token(token);\n      }\n      this.close();\n      return true;\n    };\n\n    return Mobile;\n\n  }).call(this);\n\n}).call(this);\n(function() {\n  var $, $$, append, bind, css, except, host, remove, resolve, _ref,\n    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    __slice = [].slice;\n\n  _ref = StripeCheckout.Utils, $ = _ref.$, $$ = _ref.$$, bind = _ref.bind, css = _ref.css, append = _ref.append, remove = _ref.remove, host = _ref.host, resolve = _ref.resolve, except = _ref.except;\n\n  StripeCheckout.App.Overlay = (function() {\n\n    Overlay.include = function(module) {\n      var key, value, _results;\n      _results = [];\n      for (key in module) {\n        value = module[key];\n        _results.push(this.prototype[key] = value);\n      }\n      return _results;\n    };\n\n    Overlay.include(StripeCheckout.RPC);\n\n    Overlay.prototype.iframeCSS = 'background: transparent;\\nborder: 0px none transparent;\\noverflow: hidden;\\nvisibility: hidden;\\nmargin: 0;\\npadding: 0;\\n-webkit-tap-highlight-color: transparent;\\n-webkit-touch-callout: none;';\n\n    Overlay.prototype.css = 'position: fixed;\\nleft: 0;\\ntop: 0;\\nwidth: 100%;\\nheight: 100%;\\nz-index: 9999;\\ndisplay: none;';\n\n    function Overlay(options) {\n      var _this = this;\n      this.options = options != null ? options : {};\n      this.toggleTabIndex = __bind(this.toggleTabIndex, this);\n\n      this.renderFrame = __bind(this.renderFrame, this);\n\n      this.closed = __bind(this.closed, this);\n\n      this.setToken = __bind(this.setToken, this);\n\n      this.overlayClosed = __bind(this.overlayClosed, this);\n\n      this.getHost = __bind(this.getHost, this);\n\n      this.getTarget = __bind(this.getTarget, this);\n\n      this.close = __bind(this.close, this);\n\n      this.open = __bind(this.open, this);\n\n      this.render = __bind(this.render, this);\n\n      bind(window, 'message', function() {\n        var args;\n        args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n        return _this.message.apply(_this, args);\n      });\n    }\n\n    Overlay.prototype.render = function() {\n      if (this.frame) {\n        remove(this.frame);\n      }\n      this.frame = this.renderFrame();\n      this.frame.className = 'stripe-app';\n      css(this.frame, this.css);\n      if (this.options.body) {\n        return append(document.body, this.frame);\n      }\n    };\n\n    Overlay.prototype.open = function() {\n      var _base,\n        _this = this;\n      this.ready(function() {\n        var options;\n        options = except(_this.options, 'body', 'script', 'document', 'token');\n        return _this.invokeTarget('render', 'overlay', options);\n      });\n      this.frame.style.display = 'block';\n      this.ready(function() {\n        return _this.invokeTarget('overlayOpen');\n      });\n      this.toggleTabIndex(false);\n      return typeof (_base = this.options).opened === \"function\" ? _base.opened() : void 0;\n    };\n\n    Overlay.prototype.close = function() {\n      var _this = this;\n      return this.ready(function() {\n        return _this.invokeTarget('close');\n      });\n    };\n\n    Overlay.prototype.getTarget = function() {\n      var _ref1;\n      return (_ref1 = this.frame) != null ? _ref1.contentWindow : void 0;\n    };\n\n    Overlay.prototype.getHost = function() {\n      return this.options.host;\n    };\n\n    Overlay.prototype.whitelist = ['frameReady', 'frameCallback', 'overlayClosed', 'setToken'];\n\n    Overlay.prototype.overlayClosed = function() {\n      this.closed();\n      return true;\n    };\n\n    Overlay.prototype.setToken = function(token) {\n      var _base;\n      if (typeof (_base = this.options).token === \"function\") {\n        _base.token(token);\n      }\n      this.close();\n      return true;\n    };\n\n    Overlay.prototype.closed = function() {\n      var _base;\n      this.frame.style.display = 'none';\n      this.toggleTabIndex(true);\n      return typeof (_base = this.options).closed === \"function\" ? _base.closed() : void 0;\n    };\n\n    Overlay.prototype.renderFrame = function() {\n      var iframe,\n        _this = this;\n      iframe = document.createElement('iframe');\n      iframe.setAttribute('frameBorder', '0');\n      iframe.setAttribute('allowtransparency', 'true');\n      iframe.style.cssText = this.iframeCSS;\n      bind(iframe, 'load', function() {\n        return iframe.style.visibility = 'visible';\n      });\n      iframe.src = this.options.host + this.options.path;\n      return iframe;\n    };\n\n    Overlay.prototype.toggleTabIndex = function(enabled) {\n      var element, elements, index, _i, _len, _results;\n      elements = $('button, input, select, textarea');\n      _results = [];\n      for (_i = 0, _len = elements.length; _i < _len; _i++) {\n        element = elements[_i];\n        if (enabled) {\n          index = element.getAttribute('data-tabindex');\n          element.tabIndex = index;\n          _results.push(element.removeAttribute('data-tabindex'));\n        } else {\n          index = element.tabIndex;\n          element.setAttribute('data-tabindex', index);\n          _results.push(element.setAttribute('tabindex', -1));\n        }\n      }\n      return _results;\n    };\n\n    return Overlay;\n\n  })();\n\n}).call(this);\n(function() {\n  var App, append, attr, bind, hasAttr, host, insertAfter, parents, remove, text, trigger, unbind, _ref,\n    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\n  _ref = StripeCheckout.Utils, bind = _ref.bind, unbind = _ref.unbind, trigger = _ref.trigger, append = _ref.append, text = _ref.text, parents = _ref.parents, host = _ref.host, remove = _ref.remove, insertAfter = _ref.insertAfter, attr = _ref.attr, hasAttr = _ref.hasAttr;\n\n  App = StripeCheckout.App;\n\n  StripeCheckout.Button = (function() {\n\n    Button.prototype.defaults = {\n      label: 'Pay with Card',\n      host: 'https://button.stripe.com',\n      cssPath: '/assets/inner/button.css',\n      tokenName: 'stripeToken'\n    };\n\n    function Button(options) {\n      var _base;\n      if (options == null) {\n        options = {};\n      }\n      this.setOptions = __bind(this.setOptions, this);\n\n      this.parentHead = __bind(this.parentHead, this);\n\n      this.parentForm = __bind(this.parentForm, this);\n\n      this.token = __bind(this.token, this);\n\n      this.open = __bind(this.open, this);\n\n      this.submit = __bind(this.submit, this);\n\n      this.append = __bind(this.append, this);\n\n      this.render = __bind(this.render, this);\n\n      this.setOptions(options);\n      (_base = this.options).token || (_base.token = this.token);\n      this.$el = document.createElement('button');\n      this.$el.setAttribute('type', 'submit');\n      this.$el.className = 'stripe-button-el';\n      bind(this.$el, 'click', this.submit);\n      bind(this.$el, 'touchstart', function() {});\n      this.render();\n    }\n\n    Button.prototype.render = function() {\n      this.$el.innerHTML = '';\n      this.$span = document.createElement('span');\n      text(this.$span, this.options.label);\n      if (!this.options.nostyle) {\n        this.$el.style.visibility = 'hidden';\n        this.$span.style.display = 'block';\n        this.$span.style.minHeight = '30px';\n      }\n      this.$style = document.createElement('link');\n      this.$style.setAttribute('type', 'text/css');\n      this.$style.setAttribute('rel', 'stylesheet');\n      this.$style.setAttribute('href', this.options.host + this.options.cssPath);\n      return append(this.$el, this.$span);\n    };\n\n    Button.prototype.append = function() {\n      var head,\n        _this = this;\n      if (this.options.script) {\n        insertAfter(this.options.script, this.$el);\n      }\n      if (!this.options.nostyle) {\n        head = this.parentHead();\n        if (head) {\n          append(head, this.$style);\n        }\n      }\n      if (this.$form = this.parentForm()) {\n        unbind(this.$form, 'submit', this.submit);\n        bind(this.$form, 'submit', this.submit);\n      }\n      if (!this.options.nostyle) {\n        return setTimeout(function() {\n          return _this.$el.style.visibility = 'visible';\n        }, 1000);\n      }\n    };\n\n    Button.prototype.disable = function() {\n      return attr(this.$el, 'disabled', true);\n    };\n\n    Button.prototype.enable = function() {\n      return this.$el.removeAttribute('disabled');\n    };\n\n    Button.prototype.isDisabled = function() {\n      return hasAttr(this.$el, 'disabled');\n    };\n\n    Button.prototype.submit = function(e) {\n      if (typeof e.preventDefault === \"function\") {\n        e.preventDefault();\n      }\n      if (!this.isDisabled()) {\n        this.open();\n      }\n      return false;\n    };\n\n    Button.prototype.open = function(options) {\n      if (options == null) {\n        options = {};\n      }\n      this.setOptions(options);\n      return App.open(this.options);\n    };\n\n    Button.prototype.token = function(value) {\n      var $input;\n      if (this.options.script) {\n        trigger(this.options.script, 'token', value);\n      }\n      if (this.$form) {\n        $input = this.renderInput(value.id);\n        append(this.$form, $input);\n        this.$form.submit();\n      }\n      return this.disable();\n    };\n\n    Button.prototype.renderInput = function(value) {\n      var input;\n      input = document.createElement('input');\n      input.type = 'hidden';\n      input.name = this.options.tokenName;\n      input.value = value;\n      return input;\n    };\n\n    Button.prototype.parentForm = function() {\n      var el, elements, _i, _len, _ref1;\n      elements = parents(this.$el);\n      for (_i = 0, _len = elements.length; _i < _len; _i++) {\n        el = elements[_i];\n        if (((_ref1 = el.tagName) != null ? _ref1.toLowerCase() : void 0) === 'form') {\n          return el;\n        }\n      }\n      return null;\n    };\n\n    Button.prototype.parentHead = function() {\n      var _ref1, _ref2;\n      return ((_ref1 = this.options.document) != null ? _ref1.head : void 0) || ((_ref2 = this.options.document) != null ? _ref2.getElementsByTagName('head')[0] : void 0) || this.options.document.body;\n    };\n\n    Button.prototype.setOptions = function(options) {\n      var elementOptions, key, value, _base, _ref1, _ref2;\n      if (options == null) {\n        options = {};\n      }\n      this.options || (this.options = {});\n      if (options.script) {\n        elementOptions = this.elementOptions(options.script);\n        for (key in elementOptions) {\n          value = elementOptions[key];\n          this.options[key] = value;\n        }\n      }\n      for (key in options) {\n        value = options[key];\n        this.options[key] = value;\n      }\n      _ref1 = this.defaults;\n      for (key in _ref1) {\n        value = _ref1[key];\n        if ((_ref2 = (_base = this.options)[key]) == null) {\n          _base[key] = value;\n        }\n      }\n      this.options.fallback = this.isFallback();\n      if (this.options.fallback) {\n        return this.options.nostyle = true;\n      }\n    };\n\n    Button.prototype.elementOptions = function(el) {\n      return {\n        key: attr(el, 'data-key'),\n        host: host(el.src),\n        amount: attr(el, 'data-amount'),\n        name: attr(el, 'data-name'),\n        description: attr(el, 'data-description'),\n        image: attr(el, 'data-image'),\n        label: attr(el, 'data-label'),\n        panelLabel: attr(el, 'data-panel-label'),\n        currency: attr(el, 'data-currency'),\n        address: hasAttr(el, 'data-address'),\n        notrack: hasAttr(el, 'data-notrack'),\n        nostyle: hasAttr(el, 'data-nostyle'),\n        document: el.ownerDocument,\n        body: el.ownerDocument.body\n      };\n    };\n\n    Button.prototype.isFallback = function() {\n      return !('postMessage' in window);\n    };\n\n    return Button;\n\n  })();\n\n}).call(this);\n(function() {\n  var $$, addClass, bind, hasClass, _ref;\n\n  _ref = StripeCheckout.Utils, $$ = _ref.$$, hasClass = _ref.hasClass, addClass = _ref.addClass, bind = _ref.bind;\n\n  bind(window, 'load', function() {\n    return StripeCheckout.load();\n  });\n\n  (function() {\n    var button, el, element;\n    element = $$('stripe-button');\n    element = (function() {\n      var _i, _len, _results;\n      _results = [];\n      for (_i = 0, _len = element.length; _i < _len; _i++) {\n        el = element[_i];\n        if (!hasClass(el, 'active')) {\n          _results.push(el);\n        }\n      }\n      return _results;\n    })();\n    element = element[element.length - 1];\n    if (!element) {\n      return;\n    }\n    addClass(element, 'active');\n    button = new StripeCheckout.Button({\n      script: element\n    });\n    button.render();\n    button.append();\n    return StripeCheckout.setHost(button.options.host);\n  })();\n\n}).call(this);"]}